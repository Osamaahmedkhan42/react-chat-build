(this.webpackJsonpnewp1=this.webpackJsonpnewp1||[]).push([[0],{47:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(4),s=n(2),r=n.n(s),a=n(27),o=n.n(a),i=(n(47),n(15)),u=n(16),l=n(19),d=n(18),h=n(17),p=n(39),b=(n(51),n(52),p.a.initializeApp({apiKey:"AIzaSyAcK7D9ku25asLrN-ufsV2hWc8BsAptk8w",authDomain:"basic-chat-42.firebaseapp.com",projectId:"basic-chat-42",storageBucket:"basic-chat-42.appspot.com",messagingSenderId:"525598547929",appId:"1:525598547929:web:b37dab88afae01253f03c8"})),j=n(21),f=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;console.log("propsHome=>>",this.props);var t={name:"hamza",ph:"786"};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"HOME123"}),Object(c.jsx)("button",{onClick:function(){return e.props.set_data(t)},children:"check Function"}),Object(c.jsx)("button",{onClick:function(){return e.props.fb_login(e.props.history)},children:"FB login"}),Object(c.jsx)("button",{onClick:function(){return console.log(e.props)},children:"check props home c"}),Object(c.jsx)("button",{onClick:function(){return e.props.hd_login(e.props.history)},children:"Hardcoded login"})]})}}]),n}(r.a.Component),m=Object(h.b)((function(e){return{}}),(function(e){return{set_data:function(t){return e(function(e){return function(t){t({type:"SETDATA",data:e})}}(t))},fb_login:function(t){return e(function(e){return console.log("face auth"),function(t){var n=new j.a.auth.FacebookAuthProvider;j.a.auth().signInWithPopup(n).then((function(n){var c=n.credential,s=n.user,r=(c.accessToken,{name:s.displayName,email:s.email,profile:s.photoURL,uid:s.uid});j.a.database().ref("/").child("users/".concat(s.uid)).set(r).then((function(){t({type:"SETUSER",payload:r}),alert("login sucessful"),e.push("/chat")})),console.log("user=>>",r)})).catch((function(e){e.code,e.message,e.email,e.credential,console.log("error=>",e)}))}}(t))},hd_login:function(t){return e(function(e){return function(t){var n={name:"hammad",email:"hammad@abc.com",profile:"",uid:"234582347532452353450042"};j.a.database().ref("/").child("users/234582347532452353450042").set(n).then((function(){t({type:"SETUSER",payload:n}),alert("login sucessful"),e.push("/chat")}))}}(t))}}}))(f),g=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).chat=function(t){e.setState({chat_user:t});var n=e.props.current_user,c=(e.state.chat_user,e.uid_merge(n.uid,t.uid));console.log("hammad",t.uid),console.log("osama",n.uid),console.log("uid___WARS",n.uid),console.log("merged_uid>>>",c),e.get_messages(c)},e.uid_merge=function(e,t){return e<t?e+t:t+e},e.send_message=function(){var t=e.props.current_user,n=e.state.chat_user,c=e.uid_merge(t.uid,n.uid);b.database().ref("/").child("chat/".concat(c)).push({message:e.state.message,name:t.name,uid:t.uid})},e.get_messages=function(t){b.database().ref("/").child("chat/".concat(t)).on("child_added",(function(t){e.state.chat.push(t.val()),e.setState({chat:e.state.chat,message:""})}))},e.state={chat_user:{},chat:[],message:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.get_user(),this.props.get_user()}},{key:"render",value:function(){var e=this;console.log("propsChat=>",this.props.users);var t=this.props.current_user;return console.log("thistaet==>s",this.state),console.log("asdCU",this.props.current_user),Object(c.jsxs)("div",{children:[Object(c.jsxs)("h1",{children:["WELCOME ! ",t.name]}),Object(c.jsx)("img",{src:t.profile,alt:"img"}),Object(c.jsxs)("h2",{children:["Email: ",t.email]}),Object(c.jsx)("button",{onClick:function(){return e.props.dum_data()},children:"adding dummy"}),Object(c.jsx)("button",{onClick:function(){return console.log(e.props)},children:"PRops"}),Object(c.jsx)("button",{onClick:function(){return e.props.get_user()},children:"get user"}),Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsxs)("div",{style:{backgroundColor:"red"},children:[Object(c.jsx)("h4",{children:"Chat users"}),Object(c.jsx)("ul",{children:this.props.users.map((function(n,s){return n.uid!==t.uid&&Object(c.jsxs)("li",{children:[n.name," ",Object(c.jsx)("button",{onClick:function(){return e.chat(n)},children:"CHAT"})]},s)}))})]}),Object(c.jsxs)("div",{style:{width:400,backgroundColor:"yellow"},children:[Object(c.jsx)("h4",{children:"CHAT"}),Object.keys(this.state.chat_user).length?Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{children:this.state.chat_user.name}),Object(c.jsxs)("ul",{children:[this.state.chat.map((function(e,n){return Object(c.jsx)("li",{style:{color:e.uid===t.uid?"red":"green"},children:e.message},n)})),Object(c.jsx)("input",{value:this.state.message,onChange:function(t){e.setState({message:t.target.value})},type:"text",placeholder:"Enter here"}),Object(c.jsx)("button",{onClick:function(){return e.send_message()},children:"Send "})]})]}):Object(c.jsx)("div",{children:"NO USER"})]})]})]})}}]),n}(r.a.Component),O=Object(h.b)((function(e){return{current_user:e.current_user,users:e.users}}),(function(e){return{dum_data:function(){return e((function(e){j.a.database().ref("/").child("users/23458234753245235345").set({name:"hammad",email:"hammad.email",profile:"https://www.google.com/search?q=panda+images+png&client=ubuntu&hs=1xK&channel=fs&sxsrf=ALeKk03sNhgVwGYbKukeGR2hAlhZxSiLqw:1612673530976&tbm=isch&source=iu&ictx=1&fir=EHcGEokSNqeo0M%252CEkJ4xS4VaN4tTM%252C_&vet=1&usg=AI4_-kQn4D71wEu1Oij4buepoZ6xKZXmtg&sa=X&ved=2ahUKEwi78s6H_dbuAhXGasAKHbAJC_IQ9QF6BAgNEAE#imgrc=EHcGEokSNqeo0M",uid:"234582347532452353450042"}).then((function(){alert("dummy sucessful")}))}))},get_user:function(){return e((function(e){var t=[];j.a.database().ref("/").child("users").on("child_added",(function(n){t.push(n.val()),console.log("firebasae_added=>",t),e({type:"SETFIREBASEUSER",payload:t})}))}))}}}))(g),x=n(40),_=n(9),v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(c.jsxs)(x.a,{children:[Object(c.jsx)(_.a,{exact:!0,path:"/",component:m}),Object(c.jsx)(_.a,{exact:!0,path:"/chat",component:O})]})}}]),n}(r.a.Component),y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{children:Object(c.jsx)(v,{})})}}]),n}(r.a.Component),k=Object(h.b)((function(e){return{}}),null)(y),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))},C=n(26),S={users:[],current_user:{}},A=n(25),w=n(41),T=Object(A.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(console.log("action==>",t),t.type){case"SETUSER":return Object(C.a)(Object(C.a)({},e),{},{current_user:t.payload});case"SETFIREBASEUSER":return Object(C.a)(Object(C.a)({},e),{},{users:t.payload});default:return e}return e}),Object(A.a)(w.a));o.a.render(Object(c.jsx)(h.a,{store:T,children:Object(c.jsx)(k,{})}),document.getElementById("root")),E()}},[[54,1,2]]]);
//# sourceMappingURL=main.a259a856.chunk.js.map